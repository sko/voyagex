:javascript
  $("head").append("<style type='text/css'>#upload_data_panel_content {height:"+($(window).height()-50)+"px !important; overflow: scroll;}</style>");
  var photoWidth = Math.round($(window).width() * 0.75);
  var photoHeight = Math.round($(window).height() * 0.75);
  $("head").append("<style type='text/css'>#media_input_capture, #media_input_current {width:"+photoWidth+"px;height:"+photoHeight+"px;}</style>");
/#upload_data_panel{data: {role: 'popup', 'overlay-theme' => 'a', theme: 'a'}}
#upload_data_panel{data: {role: 'panel', dismissible: 'false', animate: 'true', display: 'overlay'}}
  /#content_uploads{style: 'display: none;'}
  #upload_data_panel_content
    .ui-button.ui-widget.ui-state-default.ui-corner-all.ui-button-text-only{onclick: '$("#upload_data_panel").panel("close");'}
      .ui-button-text
        Close Panel
    .upload_source_select{data: {role: 'controlgroup', type: 'horizontal'}}
      %button{value: 'camera',onclick: 'toggleUploadType(this)', class: 'ui-btn ui-corner-all'}
        #{t('uploads.select_camera').html_safe}
      %button{value: 'file', onclick: 'toggleUploadType(this)', class: 'ui-btn ui-corner-all'}
        #{t('uploads.select_file').html_safe}
      /= link_to t('uploads.select_camera'), '#', class: 'ui-btn ui-corner-all', id: 'media_input_panel_show'
      /= link_to t('uploads.select_file'), '#', class: 'ui-btn ui-corner-all', id: 'media_input_panel_show'
    .messages
      #upload_error
      #upload_message
      #upload_progress
    .field
      %span{style: 'float: left; padding-right: 20px;'}
        #{t('uploads.comment')}
      = text_area_tag 'upload_comment_text', '', id: 'upload_comment'
    .upload_data_container#upload_cam_container{style: 'width: 100%;'}
      = render partial: '/uploads/form/camera_data.mobile', locals: {resource: Upload.new, resource_name: :upload}
    .upload_data_container#upload_file_container
      = form_for resource, remote: true, method: :put, :html => { class: nil, :multipart => true, :id => "upload_form", target: "upload_target" } do |f|
        #upload_file_controls{style: 'float: left; display: none;'}
          %span{style: 'float: left;'}
            = f.file_field 'file', id: 'fileupload'
          %button.show-page-loading-msg{id: "upload_button", data: {type: 'json', theme: 'a', textonly: 'false', textvisible: 'true', msgtext: 'Loading'}}
            #{t('uploads.upload').html_safe}
          .field
            %span{style: 'float: left;'}
              #{t('uploads.comment')}
            = text_area_tag 'upload_comment[text]', '', id: 'upload_comment'
        = hidden_field_tag 'location[latitude]'
        = hidden_field_tag 'location[longitude]'
        = hidden_field_tag 'user[id]'
